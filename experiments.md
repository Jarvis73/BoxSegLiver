

# Experiments

Version 2.0

* New data loader
* New evaluator

## UNet, LiTS

| config                     | fold 0      | fold 1      | fold 2          | fold 3      | fold 4      | test            | remark           |
| -------------------------- | ----------- | ----------- | --------------- | ----------- | ----------- | --------------- | ---------------- |
| 001_unet_noise_0_05        | 0.953       | 0.964       | 0.968           | 0.932       | 0.959       | 0.954/0.955     | Liver            |
|                            | 0.527       | 0.613       | **0.691**       | 0.597       | 0.522       | **0.650**/0.769 | Tumor            |
| 001_unet_rflip             |             | 0.957       | 0.969           |             |             |                 |                  |
|                            |             | 0.619       | 0.661           |             |             |                 |                  |
| 011_gnet_de_lr             |             |             | 0.970           |             |             |                 |                  |
|                            |             |             | 0.716           |             |             |                 |                  |
| 011_gnet_de_lrv2 (plateau) |             |             | 0.970           |             |             |                 |                  |
|                            |             |             | 0.736           |             |             |                 |                  |
| 011_gnet_de_rflip          | 0.959       | 0.968/0.970 | 0.971/0.973     | 0.939/0.964 | 0.965       |                 |                  |
|                            | 0.642       | 0.690/0.802 | **0.758/0.847** | 0.697/0.802 | 0.637       |                 |                  |
| 012_gnet_sp_lr             |             |             | 0.970           |             |             |                 |                  |
|                            |             |             | 0.771           |             |             |                 |                  |
| 012_gnet_sp_lr_v2 (global) | 0.962/0.967 | 0.969/0.971 | 0.970/0.973     | 0.934/0.956 | 0.967/0.969 |                 |                  |
|                            | 0.731/0.733 | 0.743/0.802 | **0.783/0.832** | 0.728/0.778 | 0.722/0.858 |                 |                  |
| 012_gnet_sp_rflip          |             |             | 0.970           |             |             |                 |                  |
|                            |             |             | 0.764           |             |             |                 |                  |
| 012_gnet_sp_lr_v3          |             |             | 0.970           |             |             |                 |                  |
|                            |             |             | 0.777           |             |             |                 |                  |
| 013_gnet_sp_rand           | 0.960/0.966 | 0.966/0.967 | 0.970/0.973     | 0.936/0.960 | 0.965/0.966 |                 |                  |
|                            | 0.611/0.669 | 0.635/0.768 | 0.723/0.834     | 0.616/0.779 | 0.595/0.826 |                 | 0.749            |
| 013_gnet_sp_rand_00        |             |             | 0.970/0.973     |             |             |                 |                  |
|                            |             |             | 0.700/0.829     |             |             |                 |                  |
| 013_gnet_sp_rand_25        |             |             | 0.970/0.973     |             |             |                 | 0.970/0.973      |
|                            |             |             | 0.699/0.832     |             |             |                 | 0.736/0.831      |
| 013_gnet_sp_rand_75        |             |             | 0.971/0.974     |             |             |                 |                  |
|                            |             |             | 0.721/0.830     |             |             |                 |                  |
| 014_gnet_both              | 0.962/0.968 | 0.964/0.965 | **0.971**/0.974 | 0.935/0.958 |             |                 |                  |
|                            | 0.715/0.740 | 0.739/0.807 | 0.793/0.836     | 0.711/0.778 |             |                 |                  |
| 015_gnet_de_vgg            |             |             | 0.968           |             |             |                 |                  |
|                            |             |             | 0.737           |             |             |                 |                  |
| 016_gnet_glcm              |             | 0.968/0.971 | 0.971/0.974     | 0.939/0.964 |             |                 |                  |
|                            |             | 0.716/0.793 | **0.746**/0.834 | 0.725/0.828 |             |                 |                  |
| 017_gnet_context_both_v2   |             | 0.968/0.969 | 0.971/0.974     | 0.939/0.964 |             |                 |                  |
|                            |             | 0.711/0.793 | **0.769/0.842** | 0.736/0.826 |             |                 |                  |
| 017_gnet_context_both_200  |             |             | 0.970/0.973     |             |             |                 |                  |
|                            |             |             | 0.737/0.829     | ///         |             |                 |                  |
| 017_gnet_context_both_400  |             |             | 0.969/0.972     |             |             |                 |                  |
|                            |             |             | 0.766/0.824     |             |             |                 |                  |
| 018_gnet_both_aa           |             |             | 0.970/0.973     |             |             |                 |                  |
|                            |             |             | 0.783/0.830     | ///         |             |                 |                  |
| 018_gnet_both_aa_decay     |             |             | 0.970/0.973     |             |             |                 |                  |
|                            |             |             | 0.787/0.836     | ///         |             |                 |                  |
| 018_gnet_both_aa_decay_v2  | 0.963/0.968 | 0.966/0.967 | 0.969/0.972     | 0.935/0.959 | 0.967/0.968 |                 |                  |
|                            | 0.732/0.737 | 0.736/0.800 | 0.793/**0.847** | 0.721/0.774 | 0.702/0.855 |                 | 105k 0.790/0.826 |
| 018_gnet_both_aa_decay_v3  |             | 0.961/0.963 |                 |             |             |                 |                  |
|                            |             | 0.729/0.800 |                 |             |             |                 |                  |
| 019_gnet_both2_aa          |             | 0.967/0.968 | 0.970/0.973     | 0.936/0.960 |             |                 |                  |
|                            |             | 0.747/0.798 | **0.795**/0.845 | 0.734/0.814 |             |                 |                  |
| 020_gnet_both1_aa(021)     |             | 0.966/0.967 | 0.970/0.973     | 0.938/0.963 |             |                 |                  |
|                            |             | 0.715/0.757 | **0.793**/0.836 | 0.746/0.833 |             |                 |                  |
| 023_gnet_both2             |             | 0.961/0.960 | 0.971/0.974     |             |             |                 |                  |
|                            |             | 0.707/0.764 | 0.786/0.843     |             |             |                 |                  |
| 024_gnet_both2_aa_v2       |             | 0.961/0.962 | 0.971/0.974     |             |             |                 |                  |
|                            |             | 0.740/0.796 | 0.785/0.846     |             |             |                 |                  |



## Augmentation: Noise

| fold 2 | 0.03          | 0.05  | 0.07          |
| ------ | ------------- | ----- | ------------- |
| Liver  | 0.968         | 0.968 | 0.963         |
| Tumor  | 0.680 (final) | 0.691 | 0.664 (final) |

## Augmentation: Flip

| fold 1 | Test | no flip | flip left/right | flip up/down | flip left/right up/down |
| ------ | ---- | ------- | --------------- | ------------ | ----------------------- |
| Liver  | Off  |         |                 |              |                         |
|        | on   | ---     | 0.964           |              | 0.957                   |
| Tumor  | Off  |         |                 |              |                         |
|        | on   | ---     | 0.613           |              | 0.619                   |

## 012_gnet_sp_lr_v2 --> User global dice as metric

| checkpoint_best | Liver | Tumor | Liver-Mirror-1 | Tumor-Mirror-1 |
| --------------- | ----- | ----- | -------------- | -------------- |
| 100000          | 0.966 | 0.749 |                |                |
| 200000          | 0.970 | 0.751 |                |                |
| 300000          | 0.969 | 0.766 |                |                |
| 400000          | 0.970 | 0.772 | 0.970          | 0.773          |
| 500000          | 0.970 | 0.754 | 0.970          | 0.776          |
| 600000          | 0.970 | 0.758 | 0.970          | **0.783**      |
| 700000          |       |       | 0.970          | 0.777          |

## Neurofibroma

|                                         | Dice per case | Dice global | VOE   | ARVD  |
| --------------------------------------- | ------------- | ----------- | ----- | ----- |
| 101_unet                                | 0.492         | 0.549       | 0.631 | 0.544 |
| 110_nf_de                               | 0.562         | 0.370       | 0.563 | 0.405 |
| 114_nf_context                          | 0.556         | 0.444       |       |       |
| 111_nf_sp_rand 1.0                      | 0.717         | 0.681       | 0.415 | 0.339 |
| 0.5                                     | 0.500         | 0.588       | 0.625 | 0.506 |
| 112_nf_sp_dp                            | 0.802         | 0.750       | 0.312 | 0.253 |
| 112_nf_sp_gamma                         | 0.812         | 0.746       | 0.301 | 0.251 |
| 113_nf_glcm                             | 0.660         | 0.560       | 0.468 | 0.332 |
| 113_nf_glcm_initv2                      | 0.679         | 0.590       | 0.456 | 0.319 |
| 115_nf_both1                            | 0.808         | 0.734       | 0.306 |       |
| 115_nf_both1_v2                         | 0.810         | 0.746       | 0.303 | 0.225 |
| 115_nf_both1_zscore                     | 0.813         | 0.745       | 0.303 |       |
| 116_nf_both1_rand 1.0                   | 0.680         | 0.629       | 0.457 |       |
| 0.5                                     | 0.488         | 0.557       | 0.635 |       |
| 115_nf_both1_gamma_44                   | **0.820**     | 0.757       | 0.299 |       |
| 115_nf_both1_gamma_44_fix               | 0.811         | 0.752       | 0.300 | 0.235 |
| 115_nf_both1_gamma_55_fix_noise scale=7 | 0.822         | 0.753       | 0.286 | 0.198 |
| 115_nf_both1_gamma_55_fix scale=7       | 0.823         | 0.752       | 0.288 | 0.203 |
| 115_nf_both3_gamma scale=7 fz=20        | 0.809         | 0.689       | 0.295 |       |
| 115_nf_both3_gamma scale=7              | 0.798         |             |       |       |
| 115_nf_both0_gamma scale=7 fz=20 best   | 0.826         | 0.783       | 0.280 |       |
| 115_nf_both0_gamma scale=7              | 0.812         | 0.775       | 0.301 |       |
| 117_nf_both0_gamma_inter fz=20 best     | 0.837         | 0.777       | 0.267 |       |
| 117_nf_both0_gamma_inter                | 0.814         | 0.769       | 0.301 |       |
| 118_nf_both0_gamma_grad fz=20 best      | **0.848**     | 0.808       | 0.252 |       |
| 118_nf_both0_gamma_grad                 | **0.830**     | 0.801       | 0.278 |       |
| 118_nf_both3_gamma_grad fz=20 best      | 0.819         |             |       |       |
| 118_nf_both3_gamma_grad                 | 0.807         |             |       |       |

注: 先把所有的RVD取绝对值再求平均



## 3D-IRCAD-B

|                 | Liver       | Tumor       |
| --------------- | ----------- | ----------- |
| U-Net           | 0.950/0.943 | 0.543/0.622 |
| G-Nets with CGM | 0.963/0.963 | 0.589/0.640 |



Waiting:

* 022_gnet_context_magic_glcm

